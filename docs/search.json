[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "F1 2024 Analysis",
    "section": "",
    "text": "1 Introduction\nThis project is intended to conduct exploratory data analysis to determine methods of comparing Formula 1 racing drivers during the 2024 season. Currently, F1 fan and media spaces are often embroiled in debate regarding the makings of the best driver, the qualities that contribute to succeeding in the World Drivers Championship over the course of the 24-race season. Former world champions, motorsport experts, and even Electronic Arts’ F1 Game cite varying markers of success from a combination of consistency and experience to fast pace melded with awareness. Considering these numerous quantitative features of driver performance from average lap time to penalty points and external factors, like driver team, race circuit style, and tire strategy, I would like to explore which attributes truly resulted in success in the 2024 World Drivers’ Championship. To guide my investigation, I will frequently need to control certain external variables when measuring true driver performance excellence, like comparing driver standings in the championship across the grid is not the most insightful considering it does not take into account the different speeds of the car they’re driving. As an avid watcher of Formula 1, I’m really interested in pursuing this project to identify and analyze which driver performance traits define and propel some of my favorite drivers.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  Data",
    "section": "",
    "text": "2.1 Description\nI intend to access the Jolpica-F1 API (https://api.jolpi.ca/ergast/) drawing from the Ergast API as my main data source for this project. This open-source API directly compiles Formula 1 results from 1950 through 2024 published by the FIA (Federation Internationale de l’Automobile. The data is store in a MySQL database maintained by and can be access through a REST API and outputted in JSON or XML format, so I can use the jsonlite package to convert the accessed information into dataframes for visualization and analysis. Specifically, each endpoint corresponds to tables that could be joined for analysis, like circuits, races, laps, qualifying results, drivers standings, drivers, pitstops, and sprint results. This dataset is updated after every race weekend within 24 hours of the official FIA race results’ publication. Overall, the number of races per season is variable with an upward trend in the last couple decades, from a low of 7 races in 1950. I will be focusing on the 2024 season for this project with 24 race entries and 6 sprint race entries, with each event including data for 20 drivers and 10 constructors, or teams, with different numbers of race-level observations. For instance, the laps table will have over a thousand rows as it captures each of the 20 drivers’ lap time for every lap of a race that could run from 50 to 70 laps. Each record has identifiers that allow for joins to create the final tables used in analysis. Finally, I’m accessing Ergast through Jolpica because Ergast was going to cease to be maintained at the end of 2024, so Jolpica is reaching Ergast’s endpoints. I may run into some issues on analyzing driver performance for the few drivers who were swapped mid-season. I want to guide my analysis by analyzing context that most ranking systems may not consider when evaluating skill, like wet-weather performance or racecraft on street circuits, which will require me to pull from wikipedia and other articles reporting on wet weather during the 2024 season and classifications of circuits. Specifically, it is a bit trickier to classify wet weather sessions apart from maually checking each Grand Prix’s wikipedia page for mentions of “wet” or “rain,” so this manual check could result in some error. The links to those sources are included below.\nDocumentation:\nSource link: https://api.jolpi.ca/ergast/f1/\nAdditional Sources: https://medium.com/formula-one-forever/formula-1-street-circuit-surge-how-many-is-too-many-9c1672f0cf5e https://en.wikipedia.org/wiki/2024_Bahrain_Grand_Prix https://en.wikipedia.org/wiki/2024_Saudi_Arabian_Grand_Prix https://en.wikipedia.org/wiki/2024_Australian_Grand_Prix https://en.wikipedia.org/wiki/2024_Japanese_Grand_Prix https://en.wikipedia.org/wiki/2024_Chinese_Grand_Prix https://en.wikipedia.org/wiki/2024_Miami_Grand_Prix https://en.wikipedia.org/wiki/2024_Emilia_Romagna_Grand_Prix https://en.wikipedia.org/wiki/2024_Monaco_Grand_Prix https://en.wikipedia.org/wiki/2024_Canadian_Grand_Prix https://en.wikipedia.org/wiki/2024_Spanish_Grand_Prix https://en.wikipedia.org/wiki/2024_Austrian_Grand_Prix https://en.wikipedia.org/wiki/2024_British_Grand_Prix https://en.wikipedia.org/wiki/2024_Hungarian_Grand_Prix https://en.wikipedia.org/wiki/2024_Belgian_Grand_Prix https://en.wikipedia.org/wiki/2024_Dutch_Grand_Prix https://en.wikipedia.org/wiki/2024_Italian_Grand_Prix https://en.wikipedia.org/wiki/2024_Azerbaijan_Grand_Prix https://en.wikipedia.org/wiki/2024_Singapore_Grand_Prix https://en.wikipedia.org/wiki/2024_United_States_Grand_Prix https://en.wikipedia.org/wiki/2024_Mexico_City_Grand_Prix https://en.wikipedia.org/wiki/2024_S%C3%A3o_Paulo_Grand_Prix https://en.wikipedia.org/wiki/2024_Las_Vegas_Grand_Prix https://en.wikipedia.org/wiki/2024_Qatar_Grand_Prix https://en.wikipedia.org/wiki/2024_Abu_Dhabi_Grand_Prix\nLicense: The project uses Apache 2.0 license for the codebase (as noted on its GitHub repository).",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.2 Missing value analysis",
    "text": "2.2 Missing value analysis\n\n\nCode\nlibrary(jsonlite)\nlibrary(purrr)\n\n\n\nAttaching package: 'purrr'\n\n\nThe following object is masked from 'package:jsonlite':\n\n    flatten\n\n\nCode\nlibrary(dplyr)\n\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\n\nCode\nlibrary(naniar)\n\n\nWarning: package 'naniar' was built under R version 4.5.2\n\n\nCode\nlibrary(ggplot2)\n\n\nWarning: package 'ggplot2' was built under R version 4.5.2\n\n\nCode\n# qualifying results\nget_qualifying &lt;- function(round) {\n  url &lt;- paste0(\n    \"https://api.jolpi.ca/ergast/f1/2024/\",\n    round,\n    \"/qualifying.json\"\n  )\n\n  tryCatch({\n    res &lt;- jsonlite::fromJSON(url)\n    races &lt;- res$MRData$RaceTable$Races\n\n    # Some rounds might not have qualifying data\n    if (length(races) == 0 || is.null(races$QualifyingResults[[1]])) {\n      message(\"No qualifying for round: \", round)\n      return(NULL)\n    }\n\n    df &lt;- races$QualifyingResults[[1]]\n    df$round &lt;- round\n    return(df)\n  }, error = function(e) {\n    message(\"Failed on round: \", round)\n    return(NULL)\n  })\n}\n\nqual_df &lt;- purrr::map_df(1:24, get_qualifying)\n\n# race results\nget_race_results &lt;- function(round) {\n  url &lt;- paste0(\n    \"https://api.jolpi.ca/ergast/f1/2024/\",\n    round,\n    \"/results.json\"\n  )\n\n  tryCatch({\n    res &lt;- jsonlite::fromJSON(url)\n    races &lt;- res$MRData$RaceTable$Races\n\n    if (length(races) == 0 || is.null(races$Results[[1]])) {\n      message(\"No race results for round: \", round)\n      return(NULL)\n    }\n\n    df &lt;- races$Results[[1]]\n    df$round &lt;- round\n    return(df)\n  }, error = function(e) {\n    message(\"Failed on round: \", round)\n    return(NULL)\n  })\n}\n\nrace_df &lt;- purrr::map_df(1:24, get_race_results)\n\n\n\n\nCode\n# clean dfs\nlibrary(tidyr)\n\nrace_df_clean &lt;- race_df |&gt;\n  # expand nested Driver info\n  unnest_wider(Driver, names_sep = \"_\") |&gt;\n  \n  # expand nested Constructor info\n  unnest_wider(Constructor, names_sep = \"_\") |&gt;\n  unnest_wider(Time, names_sep = \"_\", simplify = TRUE) |&gt;\n  unnest_wider(FastestLap, names_sep = \"_\", simplify = TRUE)\n\n\nrace_df_subset &lt;- race_df_clean |&gt;\n  select(\n    round,\n    position = position,\n    driver = Driver_familyName,\n    driver_code = Driver_code,\n    constructor = Constructor_name,\n    grid = grid,\n    laps = laps,\n    status = status,\n    points = points,\n    time = Time_time\n  )\n\nqual_df_clean &lt;- qual_df |&gt;\n  unnest_wider(Driver, names_sep = \"_\") |&gt;\n  \n  # Expand Constructor info\n  unnest_wider(Constructor, names_sep = \"_\") |&gt;\n  \n  # Convert Q1/Q2/Q3 times to character (some are missing)\n  mutate(\n    Q1 = as.character(Q1),\n    Q2 = as.character(Q2),\n    Q3 = as.character(Q3)\n  )\n\nqual_df_subset &lt;- qual_df_clean |&gt;\n  select(\n    round,\n    position,\n    driver = Driver_familyName,\n    driver_code = Driver_code,\n    constructor = Constructor_name,\n    number,\n    Q1,\n    Q2,\n    Q3\n  )\n\nhead(race_df_subset)\n\n\n# A tibble: 6 × 10\n  round position driver  driver_code constructor grid  laps  status points time \n  &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;       &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;\n1     1 1        Versta… VER         Red Bull    1     57    Finis… 26     1:31…\n2     1 2        Pérez   PER         Red Bull    5     57    Finis… 18     +22.…\n3     1 3        Sainz   SAI         Ferrari     4     57    Finis… 15     +25.…\n4     1 4        Leclerc LEC         Ferrari     2     57    Finis… 12     +39.…\n5     1 5        Russell RUS         Mercedes    3     57    Finis… 10     +46.…\n6     1 6        Norris  NOR         McLaren     7     57    Finis… 8      +48.…\n\n\nCode\nhead(qual_df_subset)\n\n\n# A tibble: 6 × 9\n  round position driver     driver_code constructor  number Q1       Q2    Q3   \n  &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;\n1     1 1        Verstappen VER         Red Bull     1      1:30.031 1:29… 1:29…\n2     1 2        Leclerc    LEC         Ferrari      16     1:30.243 1:29… 1:29…\n3     1 3        Russell    RUS         Mercedes     63     1:30.350 1:29… 1:29…\n4     1 4        Sainz      SAI         Ferrari      55     1:29.909 1:29… 1:29…\n5     1 5        Pérez      PER         Red Bull     11     1:30.221 1:29… 1:29…\n6     1 6        Alonso     ALO         Aston Martin 14     1:30.179 1:29… 1:29…\n\n\n\n\nCode\n# missing value analysis\n# Race missing summary\nrace_df_subset |&gt; \n  miss_var_summary()\n\n\n# A tibble: 10 × 3\n   variable    n_miss pct_miss\n   &lt;chr&gt;        &lt;int&gt;    &lt;num&gt;\n 1 time            47     9.81\n 2 round            0     0   \n 3 position         0     0   \n 4 driver           0     0   \n 5 driver_code      0     0   \n 6 constructor      0     0   \n 7 grid             0     0   \n 8 laps             0     0   \n 9 status           0     0   \n10 points           0     0   \n\n\nCode\n# Qualifying missing summary\nqual_df_subset |&gt;\n  miss_var_summary()\n\n\n# A tibble: 9 × 3\n  variable    n_miss pct_miss\n  &lt;chr&gt;        &lt;int&gt;    &lt;num&gt;\n1 Q3             239     49.9\n2 Q2             119     24.8\n3 round            0      0  \n4 position         0      0  \n5 driver           0      0  \n6 driver_code      0      0  \n7 constructor      0      0  \n8 number           0      0  \n9 Q1               0      0  \n\n\n\n\nCode\nlibrary(stringr)\n\n# Bar plot of missingness per variable\ngg_miss_var(race_df_subset)\n\n\n\n\n\n\n\n\n\nCode\n# Bar plot of missingness per variable\ngg_miss_var(qual_df_subset)\n\n\n\n\n\n\n\n\n\nCode\nqual_missing &lt;- qual_df_subset |&gt;\n  mutate(\n    missing_Q1 = is.na(Q1),\n    missing_Q2 = is.na(Q2),\n    missing_Q3 = is.na(Q3))\n\nmissing_long &lt;- qual_missing |&gt;\n  pivot_longer(\n    cols = starts_with(\"missing_\"),\n    names_to = \"session\",\n    values_to = \"is_missing\"\n  ) |&gt;\n  group_by(round, session) |&gt;\n  summarize(n_missing = sum(is_missing), .groups = \"drop\")\n\nggplot(missing_long, aes(x = round, y = n_missing, fill = session)) +\n  geom_col(position = \"dodge\") +\n  labs(\n    title = \"Missing Qualifying Times by Round\",\n    x = \"Round\",\n    y = \"Number of Missing Times\",\n    fill = \"Session\"\n  ) +\n  theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\nAcross the merged 2024 race and qualifying datasets, missing values appear in fairly predictable ways rather than at random. In the race dataset, nearly all variables are fully complete except for race time, which is frequently missing when drivers do not finish (DNF), do not start (DNS), or are classified without a final lap time. This pattern is consistent with FIA reporting rules and doesn’t represent a data collection failure.\nMissing values in the qualifying dataset follow the structure of Formula 1’s knockout qualifying format, so they also follow a fairly predictable pattern. Every driver sets a Q1 time, but only the top 15 progress to Q2, and the top 10 advance to Q3. Therefore, missing Q2 times occur for all drivers eliminated in Q1, and missing Q3 times occur for any driver who does not reach the final session. These structural NA patterns correctly reflect competition format rather than missing data problems.\nThe qualifying missingness visualization reveals a stable structural pattern. For Q1, there were no missing times because all drivers must participate. For Q2, there were always 5 missing times per round due to the drivers eliminated in Q1. For Q3, there were always 10 missing times per round due to the drivers eliminated in Q1 and Q2. This repeating structure confirms that the dataset accurately represents the qualifying cutoff system.\nOverall, this data has no unexpected or concerning missingness appears in the datasets, and the patterns confirm high-quality and well-structured data suitable for further modeling. The main concern with data integrity for this investigation lies in collecting circuit-level information manually, like determining wet races and qualifying through wikipedia mentions of wetness and/or rain and identifying street circuits. However, there still is information for all of the circuits, albeit from a less uniform source.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Results",
    "section": "",
    "text": "3.1 Compare differences in positions gained within each constructor to determine racecraft abilities, indicating higher competenecies in overtaking and defending position.\nMy analysis of the 2024 Formula 1 season reveals clear and consistent patterns in how drivers perform relative to their teammates once we account for context such as track type, wet weather, and overtaking difficulty. First, I analyzed intra-team comparisons for popular driver rating features: pace (based on qualifying performance) and racecraft (based on positions overtaken). Afterwards, I incorporated track type, track conditioners, and circuit difficulty to gain a better understanding of intra-team dynamics and success. Finally, I ran a basic prediction to determine how accounting for these external factors’ impact on pace and racecraft contribute to driver success, and I compared the prediction to the actual 2024 season standings. Across the grid, the strongest predictor of success is intuitive in that drivers who qualify better tend to finish better, even after adjusting for conditions. Racecraft helps explain additional differences, especially on street circuits and in wet weather, where confidence and adaptability matter even more. Visualizing these patterns highlights which drivers consistently extract more performance from their car and which teams show the largest gaps between their two drivers. Overall, the results paint a nuanced picture of driver skill that goes beyond championship points, offering a more context-aware understanding of what made certain drivers successful in 2024.\n##How do teammates compare in qualifying pace? - Drivers within the same car often show meaningful performance gaps.\nDrivers within the same team use identical cars, so differences in their qualifying positions reveal how much performance comes from the driver rather than the machinery. Moreover, this is an extremely common metric for evaluating pace when rating drivers. Across the grid, several teams show clear internal gaps: for example, Verstappen at Red Bull and Leclerc at Ferrari consistently qualify several positions ahead of their teammates. Other teams, such as McLaren, show much tighter spreads, indicating more evenly matched driver pairings in terms of pace. Teams that rotated drivers mid-season display wider and noisier distributions because some drivers have fewer appearances.\n##Teammate Comparisons Reveal Which Drivers Consistently Extract More Pace From the Car\nAcross the season, average Q1–Q3 times highlight meaningful performance gaps within several teams. This visualization allows us an easier at a glance look at intra-team dynamics in that the drivers with missing higher quarter times and higher mean times per session indicate weaker performance in comparison to their teammate.\nThis racecraft analysis highlights how effectively each driver converts their qualifying position into race results, revealing substantial differences within several teams. Norris, Sainz, and Hamilton consistently gain positions on race day, marking them as standouts in overtaking, tire management, or race strategy execution. Their teammates, Piastri, Leclerc, and Russell, show slightly more variable outcomes, typically gaining fewer positions. One of the more interesting performances is Red Bull: Verstappen rarely gains or loses positions because he starts at the front, while Perez may slip backward from strong qualifying spots, emphasizing a persistent race-day deficit. Overall, the plot shows that while qualifying pace sets the stage, racecraft varies meaningfully within teams and strongly influences final outcomes.\nCode\n# Graph 4 — Wet vs. Dry Conditions Pace Comparison\nwet_pace &lt;- race_qual |&gt;\nfilter(!is.na(is_wet_qual)) |&gt;\ngroup_by(constructor, is_wet_qual) |&gt;\nsummarize(mean_qual = mean(qual_for_comparison, na.rm = TRUE), .groups = \"drop\")\n\nif (nrow(wet_pace) &gt; 0) {\nggplot(wet_pace, aes(x = as.factor(is_wet_qual), y = mean_qual, group = constructor, color = constructor)) +\ngeom_line(aes(group = constructor), linewidth = 1) +\ngeom_point(size = 2) +\nscale_x_discrete(labels = c(\"dry\",\"wet\")) +\nlabs(title = \"Team Pace: Wet vs Dry (mean qualifying position)\",\nx = \"Condition\", y = \"Mean Qualifying Position (lower = faster)\") +\nconstructor_palette\n} else {\nggplot() + labs(title = \"No wet/dry labels found in tracks_df — fill tracks_df$is_wet to enable this plot\")\n}\n\n\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#we-are-analyzing-race-pace-in-wet-weather-qualifying-conditions-compared-to-dry.-wet-weather-dramatically-reduces-grip-and-visibility-some-consider-it-to-even-equalize-differences-in-car-performance.",
    "href": "results.html#we-are-analyzing-race-pace-in-wet-weather-qualifying-conditions-compared-to-dry.-wet-weather-dramatically-reduces-grip-and-visibility-some-consider-it-to-even-equalize-differences-in-car-performance.",
    "title": "3  Results",
    "section": "3.2 We are analyzing race pace in wet weather qualifying conditions compared to dry. Wet weather dramatically reduces grip and visibility, some consider it to even equalize differences in car performance.",
    "text": "3.2 We are analyzing race pace in wet weather qualifying conditions compared to dry. Wet weather dramatically reduces grip and visibility, some consider it to even equalize differences in car performance.\nThis comparison of average qualifying performance in wet versus dry sessions reveals that most teams experience only modest changes in pace when conditions worsen, but a few show dramatic shifts. McLaren and Ferrari stand out as the strongest wet-weather qualifiers, improving relative to the field when the track becomes slippery—suggesting their cars maintain tire temperature and mechanical grip well. Aston Martin also gains performance in the wet, climbing several grid spots on average. On the other hand, traditionally strong teams like Mercedes and Red Bull qualify noticeably worse in the wet, indicating that their setups or driver comfort are more sensitive to unstable grip levels. Lower-grid teams such as Sauber and Williams remain near the back in both conditions.\n\n\nCode\n# Graph 5 - Wet Qualifying Pace\nwet_qual_rounds &lt;- tracks_df |&gt; \n  filter(is_wet_qual == TRUE) |&gt;\n  pull(round)\n\nwet_qual_data &lt;- race_qual |&gt;\n  filter(round %in% wet_qual_rounds) |&gt;\n  # ensure constructor + driver are proper chars\n  mutate(\n    constructor = as.character(constructor),\n    driver = as.character(driver)\n  )\n\n# Check if we have any rows *after* filtering for qualifying comparison\nwet_qual_filtered &lt;- wet_qual_data |&gt; filter(!is.na(qual_for_comparison))\n\nif (nrow(wet_qual_filtered) == 0) {\n  ggplot() +\n    labs(\n      title = \"Intra-Team Wet-Weather Qualifying Pace\",\n      subtitle = \"No wet qualifying data available after filtering.\"\n    ) +\n    theme_minimal()\n} else {\n\n  # Only keep constructors actually present in the filtered data\n  present_constructors &lt;- wet_qual_filtered |&gt; \n    distinct(constructor) |&gt; \n    pull(constructor)\n\n  wet_qual_filtered &lt;- wet_qual_filtered |&gt;\n    filter(constructor %in% present_constructors) |&gt;\n    droplevels()\n\n  ggplot(\n    wet_qual_filtered,\n    aes(\n      y = fct_reorder(driver, qual_for_comparison, .fun = median),\n      x = qual_for_comparison\n    )\n  ) +\n    geom_boxplot(width = 0.15, outlier.size = 1, alpha = 0.85) +\n    scale_x_reverse(breaks = c(20, 15, 10, 5, 1)) +\n    facet_wrap(~ constructor, scales = \"free_y\", drop = TRUE) +\n    labs(\n      title = \"Intra-Team Wet-Weather Qualifying Pace\",\n      x = \"Qualifying Position (lower = faster)\",\n      y = \"Driver\"\n    ) +\n    theme_bw(base_size = 12) +\n    theme(\n      strip.text = element_text(size = 8, face = \"bold\"),\n      strip.background = element_rect(fill = \"gray95\"),\n      legend.position = \"none\"\n    )\n}",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#subheading-who-thrives-when-the-track-turns-wet-intra-team-pace-under-rain-conditions",
    "href": "results.html#subheading-who-thrives-when-the-track-turns-wet-intra-team-pace-under-rain-conditions",
    "title": "3  Results",
    "section": "3.3 Subheading: Who Thrives When the Track Turns Wet? Intra-Team Pace Under Rain Conditions",
    "text": "3.3 Subheading: Who Thrives When the Track Turns Wet? Intra-Team Pace Under Rain Conditions\nWet qualifying compresses the field and is said to expose pure driver skill. Across teams, the drivers positioned farther to the right are those who deliver stronger wet-weather performance. McLaren sees Norris consistently outperform Piastri in the rain, while Hamilton shows a noticeable wet-pace advantage over Russell at Mercedes. Ferrari’s intra-team battle tightens, with Sainz marginally outperforming Leclerc when grip is at a premium. Red Bull’s wet performance split is especially stark in that Verstappen reliably anchors the right side of the distribution while Pérez drifts left, indicating greater difficulty in low-grip conditions. Teams lower in the order—such as Williams and Alpine display tighter teammate groupings, suggesting car limitations overshadow driver differences.\n\n\nCode\n# Graph 6 — Wet vs. Dry Conditions Racecraft Comparison\nlibrary(Polychrome)\n\n\nWarning: package 'Polychrome' was built under R version 4.5.2\n\n\nCode\ndriver_palette &lt;- createPalette(length(unique(race_qual$driver)), seedcolors=c(\"#ff0000\"))\nnames(driver_palette) &lt;- sort(unique(race_qual$driver))\n\n\nwetdry_driver &lt;- race_qual |&gt;\n  filter(!is.na(is_wet_race)) |&gt;\n  mutate(\n    condition = ifelse(is_wet_race, \"Wet\", \"Dry\"),\n    condition = factor(condition, levels = c(\"Dry\", \"Wet\"))\n  )\n\n# Summarize per driver per condition\nwetdry_driver_summary &lt;- wetdry_driver |&gt;\n  group_by(constructor, driver, condition) |&gt;\n  summarize(\n    mean_gain = mean(positions_gained, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\nggplot(\n  wetdry_driver_summary,\n  aes(\n    x = condition,\n    y = mean_gain,\n    group = driver,\n    color = driver\n  )\n) +\n  geom_point(size = 2) +\n  geom_line(alpha = 0.8, linewidth = 0.9) +\n\n  scale_x_discrete(limits = c(\"Dry\", \"Wet\")) +\n  scale_color_manual(values = driver_palette) +   # &lt;-- NEW PALETTE\n\n  facet_wrap(\n    ~ constructor,\n    scales = \"free_y\",\n    labeller = label_wrap_gen(width = 12)) +\n\n  labs(\n    title = \"Wet vs Dry Racecraft: Intra-Team Comparison\",\n    subtitle = \"Each line represents one driver within a team, showing how their average positions gained changes in wet vs dry races.\",\n    x = \"Conditions\",\n    y = \"Mean Positions Gained\",\n    color = \"Driver\"\n  ) +\n\n  theme_bw(base_size = 12) +\n  theme(\n    strip.text = element_text(size = 8, face = \"bold\"),\n    strip.background = element_rect(fill = \"gray95\"),\n    panel.grid.minor = element_blank(),\n\n    plot.title = element_text(size = 14, face = \"bold\"),\n    plot.subtitle = element_text(size = 10),\n    legend.position = \"right\",\n    legend.key.size = unit(0.45, \"lines\"),\n    legend.text = element_text(size = 7),\n    legend.title = element_text(size = 8, face = \"bold\"),\n    legend.spacing.y = unit(0.1, \"cm\")) +\n  guides(color = guide_legend(ncol = 1))\n\n\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#how-teams-gain-or-lose-positions-in-wet-vs-dry-races",
    "href": "results.html#how-teams-gain-or-lose-positions-in-wet-vs-dry-races",
    "title": "3  Results",
    "section": "3.4 How Teams Gain or Lose Positions in Wet vs Dry Races",
    "text": "3.4 How Teams Gain or Lose Positions in Wet vs Dry Races\nThis visualization highlights how teams show drivers who thrive when the track gets slippery. For example, both Alpine, Sauber, and Haas see strong positive gains in the wet, with certain drivers making significantly more progress than they manage in dry races. These trends suggest confident car control and adaptability under low-grip conditions. By contrast, Aston Martin, RB, and Williams show the opposite behavior, where drivers tend to perform worse in wet races, losing more positions on average compared to their dry-race results. Mercedes, Red Bull, and McLaren reveal clear divergence between teammates in that one driver improves dramatically in the wet while the other falls off, indicating that wet-weather performance is more driver-dependent rather than car-dependent in these teams.\n\n\nCode\n# Graph 7 — Circuit Type Pace Comparison\n\nstreet_stats &lt;- race_qual |&gt;\n  filter(!is.na(circuit_type)) |&gt;\n  group_by(constructor, driver, circuit_type) |&gt;\n  summarize(\n    mean_qual = mean(qual_for_comparison, na.rm = TRUE),\n    n = n(),\n    .groups = \"drop\"\n  ) |&gt;\n  filter(n &gt;= 2) |&gt;   # require at least 2 appearances per type\n  mutate(circuit_type = factor(circuit_type, levels = c(\"permanent\", \"street\")))\n\nggplot(\n  street_stats,\n  aes(\n    x = circuit_type,\n    y = mean_qual,\n    group = driver,\n    color = driver\n  )) +\n  \n  geom_line(linewidth = 1, alpha = 0.8) +\n  geom_point(size = 2) +\n\n  scale_y_reverse() +   # lower positions = better\n  scale_color_manual(values = driver_palette) + \n  facet_wrap(\n    ~ constructor,\n    scales = \"free_y\",\n    labeller = label_wrap_gen(width = 12)) +\n  labs(title = \"Intra-Team Qualifying Pace: Street vs Permanent Circuits\",\n    x = \"Circuit Type\",\n    y = \"Mean Qualifying Position\",\n    color = \"Driver\") +\n  theme_bw(base_size = 12) +\n  theme(\n    strip.text = element_text(size = 8, face = \"bold\"),\n    strip.background = element_rect(fill = \"gray95\"),\n    axis.text.x = element_text(size = 8, angle = 15, vjust = 1, hjust = 1),\n    panel.grid.minor = element_blank(),\n    plot.title = element_text(size = 14, face = \"bold\"),\n    plot.subtitle = element_text(size = 9),\n    legend.position = \"right\",\n    legend.title = element_text(size = 9),\n    legend.text = element_text(size = 7),\n    legend.key.size = unit(0.35, \"cm\"),\n    legend.spacing.y = unit(0.15, \"cm\")) +\n  guides(color = guide_legend(ncol = 1))\n\n\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#how-drivers-adapt-their-pace-across-street-vs-permanent-circuits---street-circuits-can-require-greater-confidence-and-precision",
    "href": "results.html#how-drivers-adapt-their-pace-across-street-vs-permanent-circuits---street-circuits-can-require-greater-confidence-and-precision",
    "title": "3  Results",
    "section": "3.5 How Drivers Adapt Their Pace Across Street vs Permanent Circuits - Street Circuits Can Require Greater Confidence and Precision",
    "text": "3.5 How Drivers Adapt Their Pace Across Street vs Permanent Circuits - Street Circuits Can Require Greater Confidence and Precision\nAcross teams, most drivers demonstrate noticeably different qualifying performance depending on circuit type, reinforcing that pace is strongly track-dependent. Mercedes, Alpine, and Williams show consistent improvements on street circuits, where lower-speed technical sections reward mechanical grip and confidence on the limit. Conversely, McLaren, Haas, Red Bull, and Sauber tend to perform similarly or even slightly worse on street tracks, suggesting their strengths lean toward high-speed or more traditional layouts. Within-team variation is especially notable in Ferrari, RB, and Aston Martin, where one driver seems to improve on street circuits while the other seems to lose pace.\n\n\nCode\n# Graph 8 - Circuit Type Racecraft Comparison\nracecraft_circuit &lt;- race_qual |&gt;\n  filter(!is.na(circuit_type)) |&gt;\n  group_by(constructor, driver, circuit_type) |&gt;\n  summarize(\n    mean_gain = mean(positions_gained, na.rm = TRUE),\n    n_rounds = n(),\n    .groups = \"drop\"\n  ) |&gt;\n  filter(n_rounds &gt;= 2) |&gt;    # require ≥ 2 races per driver per circuit type\n  mutate(circuit_type = factor(circuit_type, levels = c(\"permanent\", \"street\")))\n\nggplot(\n  racecraft_circuit,\n  aes(\n    x = circuit_type,\n    y = mean_gain,\n    group = driver,\n    color = driver\n  )\n) +\n  geom_point(size = 2) +\n  geom_line(linewidth = 0.9, alpha = 0.8) +\n\n  scale_color_manual(values = driver_palette) +  \n  scale_x_discrete(labels = c(\"Permanent\", \"Street\")) +\n\n  facet_wrap(\n    ~ constructor,\n    scales = \"free_y\",\n    labeller = label_wrap_gen(width = 12) ) +\n\n  labs(title = \"Racecraft Across Circuit Types: Street vs Permanent\",\n    x = \"Circuit Type\",\n    y = \"Mean Positions Gained (positive = gained places)\",\n    color = \"Driver\") +\n  theme_bw(base_size = 12) +\n  theme(\n    strip.text = element_text(size = 9, face = \"bold\"),\n    strip.background = element_rect(fill = \"gray95\"),\n\n    axis.text.x = element_text(size = 8),\n    axis.text.y = element_text(size = 8),\n\n    panel.grid.minor = element_blank(),\n    panel.spacing = unit(0.9, \"lines\"),\n\n    plot.title = element_text(size = 15, face = \"bold\"),\n    plot.subtitle = element_text(size = 10),\n\n    legend.position = \"right\",\n    legend.key.size = unit(0.35, \"cm\"),\n    legend.text = element_text(size = 7),\n    legend.title = element_text(size = 8),\n    legend.spacing.y = unit(0.1, \"cm\")\n  ) +\n  guides(\n    color = guide_legend(ncol = 1))\n\n\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#do-drivers-perform-better-on-street-or-permanent-circuits-intra-team-racecraft-patterns",
    "href": "results.html#do-drivers-perform-better-on-street-or-permanent-circuits-intra-team-racecraft-patterns",
    "title": "3  Results",
    "section": "3.6 Do Drivers Perform Better on Street or Permanent Circuits? Intra-Team Racecraft Patterns",
    "text": "3.6 Do Drivers Perform Better on Street or Permanent Circuits? Intra-Team Racecraft Patterns\nThis plot compares how each driver’s positions gained relative to qualifying differ between street circuits and permanent tracks. A lot of street circuits, like Monaco and Baku, are notably difficult for overtaking due to their narrow stretches, so overtaking during these races is rare and impressive, yet sometimes may just be a result of a lucky strategy call. Some teams show notable intra-team differences in drivers’ racecraft on street circuits. Specifically, Mclaren’s Norris beats Piastri, Haas’ Hulkenberg beats Magnussen, and Aston Martin’s Alonso beats Stroll.\n\n\nCode\n# Graph 9 — Circuit Overtaking Difficulty Comparison\n\ndriver_overtake &lt;- race_qual |&gt;\n  filter(!is.na(overtaking_score)) |&gt;\n  group_by(constructor, driver, round, overtaking_score) |&gt;\n  summarize(\n    mean_positions_gained = mean(positions_gained, na.rm = TRUE),\n    .groups = \"drop\"\n  )\n\ndriver_overtake_summary &lt;- driver_overtake |&gt;\n  group_by(constructor, driver) |&gt;\n  summarize(\n    avg_pos_gained = mean(mean_positions_gained, na.rm = TRUE),\n    avg_overtake_score = mean(overtaking_score, na.rm = TRUE),\n    n_rounds = n(),\n    .groups = \"drop\"\n  ) |&gt;\n  filter(n_rounds &gt;= 3)   # keep only drivers with enough data\n\nlibrary(Polychrome)\n\ndriver_names &lt;- sort(unique(driver_overtake_summary$driver))\n\n# generate a palette with distinct colors\ndriver_palette &lt;- createPalette(\n  length(driver_names),\n  seedcolors = c(\"#ff0000\", \"#00ff00\", \"#0000ff\")   # ensures wide color spread\n)\n\nnames(driver_palette) &lt;- driver_names\n\nggplot(driver_overtake_summary,\n       aes(x = avg_overtake_score,\n           y = avg_pos_gained,\n           color = driver)) +\n\n  geom_point(size = 3, alpha = 0.9) +\n  facet_wrap(\n    ~ constructor,\n    scales = \"free_y\",\n    ncol = 4,\n    labeller = label_wrap_gen(width = 12)) +\n  scale_color_manual(values = driver_palette) +\n\n  labs(\n    title = \"Driver Racecraft vs Circuit Overtaking Difficulty\",\n    x = \"Average Circuit Overtaking Score\",\n    y = \"Avg. Positions Gained\",\n    color = \"Driver\") +\n  theme_bw(base_size = 12) +\n  theme(\n    strip.text = element_text(size = 11, face = \"bold\"),  # clearer constructor titles\n    strip.background = element_rect(fill = \"gray92\"),\n\n    axis.text.x = element_text(size = 8),\n    axis.text.y = element_text(size = 8),\n    panel.grid.minor = element_blank(),\n    panel.spacing = unit(0.9, \"lines\"),\n    plot.title = element_text(size = 16, face = \"bold\"),\n    plot.subtitle = element_text(size = 11),\n    legend.position = \"right\",\n    legend.title = element_text(size = 10),\n    legend.text = element_text(size = 8),\n    legend.key.size = unit(0.35, \"cm\"),\n    legend.spacing.y = unit(0.2, \"cm\")) +\n  guides(color = guide_legend(ncol = 1))",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#which-drivers-gain-more-places-on-circuits-where-overtaking-is-easier",
    "href": "results.html#which-drivers-gain-more-places-on-circuits-where-overtaking-is-easier",
    "title": "3  Results",
    "section": "3.7 Which Drivers Gain More Places on Circuits Where Overtaking Is Easier?",
    "text": "3.7 Which Drivers Gain More Places on Circuits Where Overtaking Is Easier?\nThis scatter-and-facet plot compares each driver’s average positions gained with the overtaking friendliness of circuits. Some drivers like appear to gain positions consistently, like Leclerc, Zhou, Gasly, and Hulkenberg. The intra-team facets also show clearly which teammates outperform each other in that even with identical machinery, some consistently gain positions where their teammates do not.\n\n\nCode\n# Interpretable ML: Trying to predict which driver finishes ahead within their team in the 2024 season based on their skills (accounting for differences in circuits)\n\n# median overtaking score to define \"low vs high overtaking\" tracks\novertake_med &lt;- median(race_qual$overtaking_score, na.rm = TRUE)\n\ndriver_feats &lt;- race_qual |&gt;\n  group_by(constructor, driver, driver_code) |&gt;\n  summarize(\n    n_races = n(),\n    avg_qual_pos        = mean(qual_for_comparison, na.rm = TRUE),\n    avg_finish_pos      = mean(finish_pos, na.rm = TRUE),\n    avg_positions_gained = mean(positions_gained, na.rm = TRUE),\n\n    # Wet vs dry racecraft\n    mean_gain_dry = mean(positions_gained[is_wet_race == FALSE], na.rm = TRUE),\n    mean_gain_wet = mean(positions_gained[is_wet_race == TRUE],  na.rm = TRUE),\n\n    # Street vs permanent racecraft\n    mean_gain_perm   = mean(positions_gained[circuit_type == \"permanent\"], na.rm = TRUE),\n    mean_gain_street = mean(positions_gained[circuit_type == \"street\"],    na.rm = TRUE),\n\n    # Low vs high overtaking-score racecraft\n    mean_gain_lowOver  = mean(positions_gained[overtaking_score &lt;  overtake_med], na.rm = TRUE),\n    mean_gain_highOver = mean(positions_gained[overtaking_score &gt;= overtake_med], na.rm = TRUE),\n\n    .groups = \"drop\"\n  ) |&gt;\n  mutate(\n    wet_gain_delta   = replace_na(mean_gain_wet   - mean_gain_dry,   0),\n    street_gain_delta= replace_na(mean_gain_street- mean_gain_perm,  0),\n    lowOver_gain_delta =\n      replace_na(mean_gain_lowOver - mean_gain_highOver, 0)\n  ) |&gt;\n  select(\n    constructor, driver, driver_code, n_races,\n    avg_qual_pos, avg_finish_pos, avg_positions_gained,\n    wet_gain_delta, street_gain_delta, lowOver_gain_delta\n  )\n\ndriver_feats &lt;- driver_feats |&gt;\n  mutate(across(where(is.numeric), ~ replace_na(.x, 0)))\n\n# create per-race teammate pairs: Driver A vs Driver B\nrace_pairs &lt;- race_qual |&gt;\n  filter(!is.na(finish_pos)) |&gt;\n  group_by(round, constructor) |&gt;\n  # keep only races where the team had exactly 2 classified drivers\n  filter(n() == 2) |&gt;\n  arrange(round, constructor, driver_code) |&gt;\n  mutate(role = c(\"A\", \"B\")) |&gt;\n  ungroup() |&gt;\n  select(round, constructor, role, driver, driver_code, finish_pos) |&gt;\n  tidyr::pivot_wider(\n    names_from  = role,\n    values_from = c(driver, driver_code, finish_pos),\n    names_sep   = \"_\"\n  ) |&gt;\n  mutate(\n    A_beats_B = as.integer(finish_pos_A &lt; finish_pos_B)  # 1 if A finishes ahead\n  )\n\n# join features for driver A\npairs_with_feat &lt;- race_pairs |&gt;\n  left_join(\n    driver_feats,\n    by = c(\"constructor\", \"driver_A\" = \"driver\"),\n    suffix = c(\"\", \"_A\")\n  ) |&gt;\n  rename_with(~ paste0(.x, \"_A\"),\n              c(avg_qual_pos, avg_finish_pos, avg_positions_gained,\n                wet_gain_delta, street_gain_delta, lowOver_gain_delta))\n\n# join features for driver B\npairs_with_feat &lt;- pairs_with_feat |&gt;\n  left_join(\n    driver_feats,\n    by = c(\"constructor\", \"driver_B\" = \"driver\")\n  ) |&gt;\n  rename_with(~ paste0(.x, \"_B\"),\n              c(avg_qual_pos, avg_finish_pos, avg_positions_gained,\n                wet_gain_delta, street_gain_delta, lowOver_gain_delta))\n\n# build \"difference\" features: (A - B)\npair_model &lt;- pairs_with_feat |&gt;\n  mutate(\n    diff_avg_qual_pos        = avg_qual_pos_A        - avg_qual_pos_B,\n    diff_avg_positions_gained= avg_positions_gained_A - avg_positions_gained_B,\n    diff_wet_gain_delta      = wet_gain_delta_A      - wet_gain_delta_B,\n    diff_street_gain_delta   = street_gain_delta_A   - street_gain_delta_B,\n    diff_lowOver_gain_delta  = lowOver_gain_delta_A  - lowOver_gain_delta_B\n  ) |&gt;\n  select(\n    round, constructor,\n    driver_A, driver_B, A_beats_B,\n    starts_with(\"diff_\")\n  ) |&gt;\n  drop_na(A_beats_B, starts_with(\"diff_\"))\n\nhead(pair_model)\n\n\n# A tibble: 6 × 10\n  round constructor    driver_A   driver_B  A_beats_B diff_avg_qual_pos\n  &lt;int&gt; &lt;chr&gt;          &lt;chr&gt;      &lt;chr&gt;         &lt;int&gt;             &lt;dbl&gt;\n1     1 Alpine F1 Team Gasly      Ocon              0             -2.75\n2     1 Aston Martin   Alonso     Stroll            1             -1   \n3     1 Ferrari        Leclerc    Sainz             0             -1.25\n4     1 Haas F1 Team   Hülkenberg Magnussen         0             -4.25\n5     1 McLaren        Norris     Piastri           1             -1   \n6     1 Mercedes       Hamilton   Russell           0              6   \n# ℹ 4 more variables: diff_avg_positions_gained &lt;dbl&gt;,\n#   diff_wet_gain_delta &lt;dbl&gt;, diff_street_gain_delta &lt;dbl&gt;,\n#   diff_lowOver_gain_delta &lt;dbl&gt;\n\n\n\n\nCode\n# Interpretable Logistic Regression Model\nmodel_racecraft &lt;- glm(\n  A_beats_B ~ diff_avg_qual_pos +\n              diff_avg_positions_gained +\n              diff_wet_gain_delta +\n              diff_street_gain_delta +\n              diff_lowOver_gain_delta,\n  data = pair_model,\n  family = binomial()\n)\n\nsummary(model_racecraft)\n\n\n\nCall:\nglm(formula = A_beats_B ~ diff_avg_qual_pos + diff_avg_positions_gained + \n    diff_wet_gain_delta + diff_street_gain_delta + diff_lowOver_gain_delta, \n    family = binomial(), data = pair_model)\n\nCoefficients: (1 not defined because of singularities)\n                            Estimate Std. Error z value Pr(&gt;|z|)   \n(Intercept)                0.0007499  0.4188090   0.002  0.99857   \ndiff_avg_qual_pos         -0.7053078  0.2589802  -2.723  0.00646 **\ndiff_avg_positions_gained  0.6490364  0.2864391   2.266  0.02346 * \ndiff_wet_gain_delta               NA         NA      NA       NA   \ndiff_street_gain_delta     0.0087082  0.1123884   0.077  0.93824   \ndiff_lowOver_gain_delta   -0.0883085  0.1247060  -0.708  0.47886   \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 55.352  on 39  degrees of freedom\nResidual deviance: 41.839  on 35  degrees of freedom\nAIC: 51.839\n\nNumber of Fisher Scoring iterations: 5\n\n\nCode\ncoefs &lt;- coef(model_racecraft)\n\nbeta &lt;- c(\n  avg_qual_pos         = unname(coefs[\"diff_avg_qual_pos\"]),\n  avg_positions_gained = unname(coefs[\"diff_avg_positions_gained\"]),\n  wet_gain_delta       = unname(coefs[\"diff_wet_gain_delta\"]),\n  street_gain_delta    = unname(coefs[\"diff_street_gain_delta\"]),\n  lowOver_gain_delta   = unname(coefs[\"diff_lowOver_gain_delta\"])\n)\n\ndriver_ratings &lt;- driver_feats |&gt;\n  mutate(\n    skill_score =\n      beta[\"avg_qual_pos\"]         * avg_qual_pos +\n      beta[\"avg_positions_gained\"] * avg_positions_gained +\n      beta[\"wet_gain_delta\"]       * wet_gain_delta +\n      beta[\"street_gain_delta\"]    * street_gain_delta +\n      beta[\"lowOver_gain_delta\"]   * lowOver_gain_delta\n  )\n\n# Rank drivers within each constructor\nteam_rankings &lt;- driver_ratings |&gt;\n  group_by(constructor) |&gt;\n  arrange(desc(skill_score), .by_group = TRUE) |&gt;\n  mutate(predicted_team_rank = row_number()) |&gt;\n  ungroup()\n\nteam_rankings |&gt;\n  select(constructor, predicted_team_rank, driver, skill_score) |&gt;\n  arrange(constructor, predicted_team_rank)\n\n\n# A tibble: 22 × 4\n   constructor    predicted_team_rank driver     skill_score\n   &lt;chr&gt;                        &lt;int&gt; &lt;chr&gt;            &lt;dbl&gt;\n 1 Alpine F1 Team                   1 Gasly               NA\n 2 Alpine F1 Team                   2 Ocon                NA\n 3 Aston Martin                     1 Alonso              NA\n 4 Aston Martin                     2 Stroll              NA\n 5 Ferrari                          1 Leclerc             NA\n 6 Ferrari                          2 Sainz               NA\n 7 Haas F1 Team                     1 Hülkenberg          NA\n 8 Haas F1 Team                     2 Magnussen           NA\n 9 McLaren                          1 Norris              NA\n10 McLaren                          2 Piastri             NA\n# ℹ 12 more rows\n\n\n\n\nCode\n# Graph 10 - Predicted Team Finishing\n\nactual_2024 &lt;- tribble(\n  ~driver,              ~driver_code, ~constructor,       ~actual_pts,\n  \"Max Verstappen\",     \"VER\",        \"Red Bull\",         437,\n  \"Lando Norris\",       \"NOR\",        \"McLaren\",          374,\n  \"Charles Leclerc\",    \"LEC\",        \"Ferrari\",          356,\n  \"Oscar Piastri\",      \"PIA\",        \"McLaren\",          292,\n  \"Carlos Sainz\",       \"SAI\",        \"Ferrari\",          290,\n  \"George Russell\",     \"RUS\",        \"Mercedes\",         245,\n  \"Lewis Hamilton\",     \"HAM\",        \"Mercedes\",         223,\n  \"Sergio Perez\",       \"PER\",        \"Red Bull\",         152,\n  \"Fernando Alonso\",    \"ALO\",        \"Aston Martin\",     70,\n  \"Pierre Gasly\",       \"GAS\",        \"Alpine F1 Team\",   42,\n  \"Nico Hulkenberg\",    \"HUL\",        \"Haas F1 Team\",     41,\n  \"Yuki Tsunoda\",       \"TSU\",        \"RB F1 Team\",       30,\n  \"Lance Stroll\",       \"STR\",        \"Aston Martin\",     24,\n  \"Esteban Ocon\",       \"OCO\",        \"Alpine F1 Team\",   23,\n  \"Kevin Magnussen\",    \"MAG\",        \"Haas F1 Team\",     16,\n  \"Alexander Albon\",    \"ALB\",        \"Williams\",         12,\n  \"Daniel Ricciardo\",   \"RIC\",        \"RB F1 Team\",       12,\n  \"Oliver Bearman\",     \"BEA\",        \"Haas F1 Team\",     7,\n  \"Franco Colapinto\",   \"COL\",        \"Williams\",         5,\n  \"Zhou Guanyu\",        \"ZHO\",        \"Sauber\",           4,\n  \"Liam Lawson\",        \"LAW\",        \"RB F1 Team\",       4,\n  \"Valtteri Bottas\",    \"BOT\",        \"Sauber\",           0,\n  \"Logan Sargeant\",     \"SAR\",        \"Williams\",         0,\n  \"Jack Doohan\",        \"DOO\",        \"Alpine F1 Team\",   0\n)\n\n\nactual_rankings &lt;- actual_2024 |&gt;\n  group_by(constructor) |&gt;\n  arrange(desc(actual_pts)) |&gt;\n  mutate(actual_rank = row_number()) |&gt;\n  ungroup()\n\ncomparison &lt;- team_rankings |&gt;\n  left_join(\n    actual_rankings |&gt; select(driver_code, constructor, actual_rank),\n    by = c(\"driver_code\", \"constructor\")\n  )\n\n# plot\nggplot(comparison,\n       aes(x = actual_rank, \n           y = predicted_team_rank,\n           label = driver,\n           color = constructor)) +\n  geom_point(size = 3) +\n  geom_text(nudge_x = 0.1, nudge_y = 0.1, size = 3) +\n  geom_abline(slope = 1, intercept = 0, linetype = \"dashed\") +\n  scale_x_reverse(breaks = 1:4) +   # 1 = best; flips axis for intuition\n  scale_y_reverse(breaks = 1:4) +\n  facet_wrap(~ constructor, scales = \"free\") +\n  labs(\n    title = \"Predicted vs Actual Intra-Team Driver Rankings (2024)\",\n    x = \"Actual Rank (1 = best)\",\n    y = \"Predicted Rank (1 = best)\") +\n  theme_bw(base_size = 12) +\n  theme(\n    legend.position = \"none\",\n    strip.text = element_text(size = 10, face = \"bold\"),\n    plot.title = element_text(size = 14, face = \"bold\")\n  )",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#comparing-predicted-intra-team-rankings-to-actual-finishing-order-from-the-2024-season",
    "href": "results.html#comparing-predicted-intra-team-rankings-to-actual-finishing-order-from-the-2024-season",
    "title": "3  Results",
    "section": "3.8 Comparing predicted intra-team rankings to actual finishing order from the 2024 season",
    "text": "3.8 Comparing predicted intra-team rankings to actual finishing order from the 2024 season\nThis plot compares each driver’s predicted intra-team ranking—based on qualifying pace, racecraft, wet-weather adjustments, street/permanent circuit effects, and low-overtake performance with their actual 2024 finishing order within their team.\nOverall, the model performs surprisingly well given its simplicity. It almost completely ranks each drivers’ intra-team standing accurately compared to the actual 2024 drivers’ champioship standings. Some of the teams have a 3rd driver considered due to mid-season switches, which skews the analysis. However, of the team with 2 drivers, it seems that only Sauber was ranked incorrectly. Moreover, the Sauber mismatches likely stem from Bottas’s unusually unlucky season relative to Zhou, despite underlying pace indicators suggesting the reverse. Some discrepancies arise in situations where 2024 real-world results were shaped by externalities not captured in the model, like Magnussen’s unusual crash-heavy season distort the underlying pace-based expectation.\nDespite these exceptions, the model’s broad accuracy indicates that racecraft, qualifying pace, and condition-dependent performance explain a substantial portion of intra-team outcomes. This makes it a strong foundation for interpretable ML and a great candidate for further analysis via Shapley values.\n\n\nCode\n# Graph 11 - Posthoc ML Analysis with Shapley Values!\nlibrary(iml)\n\n\nWarning: package 'iml' was built under R version 4.5.2\n\n\nCode\n# predictor matrix used in modeling\nX &lt;- pair_model |&gt;\n  select(\n    diff_avg_qual_pos,\n    diff_avg_positions_gained,\n    diff_wet_gain_delta,\n    diff_street_gain_delta,\n    diff_lowOver_gain_delta\n  )\n\ny &lt;- pair_model$A_beats_B\n\npredict_fun &lt;- function(model, newdata) {\n  predict(model, newdata = as.data.frame(newdata), type = \"response\")\n}\n\nX_clean &lt;- X\nattr(X_clean, \"assign\") &lt;- NULL\nattr(X_clean, \"contrasts\") &lt;- NULL\n\nlibrary(iml)\n\npredictor_obj &lt;- Predictor$new(\n  model = model_racecraft,\n  data  = as.data.frame(X_clean),\n  y     = y,\n  predict.function = predict_fun\n)\n\nshap &lt;- Shapley$new(predictor_obj, x.interest = X_clean[1,])\n\nlogloss &lt;- function(actual, predicted) {\n  # numerical stabilizer for log()\n  eps &lt;- 1e-15\n  predicted &lt;- pmin(pmax(predicted, eps), 1 - eps)\n\n  -mean(actual * log(predicted) + (1 - actual) * log(1 - predicted))\n}\n\nimp &lt;- FeatureImp$new(\n  predictor_obj,\n  loss = logloss\n)\n\n\nWarning: package 'future' was built under R version 4.5.2\n\n\nWarning: package 'listenv' was built under R version 4.5.2\n\n\nWarning: package 'scatterplot3d' was built under R version 4.5.2\n\n\nWarning: package 'parallelly' was built under R version 4.5.2\n\n\nWarning: package 'Metrics' was built under R version 4.5.2\n\n\nWarning: package 'checkmate' was built under R version 4.5.2\n\n\nWarning: package 'globals' was built under R version 4.5.2\n\n\nWarning: package 'visdat' was built under R version 4.5.2\n\n\nCode\nplot(imp)\n\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\nℹ The deprecated feature was likely used in the iml package.\n  Please report the issue at &lt;https://github.com/giuseppec/iml/issues&gt;.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "results.html#feature-importance-which-factors-most-influence-intra-team-outcomes",
    "href": "results.html#feature-importance-which-factors-most-influence-intra-team-outcomes",
    "title": "3  Results",
    "section": "3.9 Feature Importance: Which Factors Most Influence Intra-Team Outcomes?",
    "text": "3.9 Feature Importance: Which Factors Most Influence Intra-Team Outcomes?\nThe Shapley-based feature importance analysis shows that average qualifying advantage overwhelmingly drives the model’s ability to predict which teammate finishes ahead. Racecraft plays a secondary role, offering modest predictive value, while situational effects—wet-weather performance, street-track advantage, and performance on low-overtaking circuits—contribute very little overall. This suggests that across a full season, consistent single-lap pace may be the clearest and most reliable differentiator between teammates, with racecraft providing additional but smaller impact.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  },
  {
    "objectID": "conclusion.html",
    "href": "conclusion.html",
    "title": "4  Conclusion",
    "section": "",
    "text": "This project set out to evaluate what truly drives Formula 1 driver performance once external factors such as car strength, circuit characteristics, and weather variability are controlled for, and the analyses across qualifying pace, racecraft, wet-weather adaptability, circuit type differences, and overtaking difficulty reveal a fairly consistent story that driver performance within a team is overwhelmingly defined by qualifying pace, with racecraft providing the next strongest source of differentiation. Condition-specific factors, like wet races, street circuits, and overtaking difficulty, proved far less influential in determining intra-team outcomes, a finding reinforced by the interpretable logistic model and Shapley value analysis. The model’s strong alignment with actual 2024 intra-team standings shows that a small number of intuitive, interpretable features explain much of the competitive hierarchy among teammates. At the same time, the mismatches highlight critical limitations of purely performance-based modeling, like luck-driven events such as engine failures, long pit stops, safety-car timing, DNFs, and team strategy calls can meaningfully distort race outcomes in ways not captured by average pace or racecraft metrics. Future extensions could explore further explicitly modeling these randomness components, quantifying reliability effects, pit stop variance, or luckier strategy. Overall, this project demonstrates how contextualized data analysis and interpretable machine learning together can uncover the defining factors of driver performance, separating true skill from the noise introduced by machinery and environment.",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Conclusion</span>"
    ]
  }
]